# TreeSet API 测试设计文档

## 测试概述

### 测试对象
- **API名称**: @ohos.util.TreeSet
- **API类型**: 类
- **测试文件**: entry/src/ohosTest/ets/test/TreeSet.test.ets
- **测试设计文档**: entry/src/ohosTest/ets/test/TreeSet.test.design.md

### 测试目标
验证 TreeSet 类的核心功能，包括添加、删除、查询等操作，确保在各种输入场景下都能正常工作，并正确抛出预期的错误码。

## 测试场景设计

### 场景1: 正常字符串参数

| 项目 | 内容 |
|------|------|
| **场景描述** | 测试 TreeSet 的 add 方法在参数为正常字符串时的行为 |
| **测试用例编号** | SUB_UTILS_UTIL_TREESET_ADD_PARAM_001 |
| **测试用例名称** | testAddStringNormal001 |
| **前置条件** | TreeSet 实例已创建，容器为空 |
| **测试步骤** | 1. 创建 TreeSet<string> 实例<br>2. 调用 add() 方法，参数为 "hello"<br>3. 验证返回值为 true |
| **预期结果** | 方法执行成功，返回值为 true，元素成功添加到集合中 |
| **测试类型** | FUNCTION |
| **测试级别** | Level1 |
| **测试数据** | 参数: "hello" |

### 场景2: 空字符串参数

| 项目 | 内容 |
|------|------|
| **场景描述** | 测试 TreeSet 的 add 方法在参数为空字符串时的行为 |
| **测试用例编号** | SUB_UTILS_UTIL_TREESET_ADD_PARAM_002 |
| **测试用例名称** | testAddStringEmpty002 |
| **前置条件** | TreeSet 实例已创建，容器为空 |
| **测试步骤** | 1. 创建 TreeSet<string> 实例<br>2. 调用 add() 方法，参数为 ""（空字符串）<br>3. 验证返回值为 true |
| **预期结果** | 方法执行成功，返回值为 true，空字符串成功添加到集合中 |
| **测试类型** | FUNCTION |
| **测试级别** | Level1 |
| **测试数据** | 参数: ""（空字符串） |

### 场景3: null 参数

| 项目 | 内容 |
|------|------|
| **场景描述** | 测试 TreeSet 的 add 方法在参数为 null 时的错误处理 |
| **测试用例编号** | SUB_UTILS_UTIL_TREESET_ADD_PARAM_003 |
| **测试用例名称** | testAddStringNull003 |
| **前置条件** | TreeSet 实例已创建，容器为空 |
| **测试步骤** | 1. 创建 TreeSet<string> 实例<br>2. 调用 add() 方法，参数为 null<br>3. 捕获异常并验证错误码 |
| **预期结果** | 抛出 BusinessError 异常，错误码为 401（参数错误） |
| **测试类型** | FUNCTION |
| **测试级别** | Level2 |
| **测试数据** | 参数: null |

### 场景4: 容器为空时调用 popFirst

| 项目 | 内容 |
|------|------|
| **场景描述** | 测试 TreeSet 的 popFirst 方法在容器为空时抛出错误码 10200010 |
| **测试用例编号** | SUB_UTILS_UTIL_TREESET_POPFIRST_ERROR_10200010_001 |
| **测试用例名称** | testPopFirstError10200010001 |
| **前置条件** | TreeSet 实例已创建，容器为空 |
| **测试步骤** | 1. 创建 TreeSet<number> 实例<br>2. 调用 popFirst() 方法<br>3. 捕获异常并验证错误码 |
| **预期结果** | 抛出 BusinessError 异常，错误码为 10200010（容器为空） |
| **测试类型** | FUNCTION |
| **测试级别** | Level2 |
| **测试数据** | 无需参数 |

### 场景5: 返回有效值

| 项目 | 内容 |
|------|------|
| **场景描述** | 测试 TreeSet 的 getFirst 方法的返回值 |
| **测试用例编号** | SUB_UTILS_UTIL_TREESET_GETFIRST_RETURN_001 |
| **测试用例名称** | testGetFirstReturn001 |
| **前置条件** | TreeSet 实例已创建，容器中有元素 |
| **测试步骤** | 1. 创建 TreeSet<number> 实例<br>2. 添加元素：100, 50, 150<br>3. 调用 getFirst() 方法<br>4. 验证返回值为 50（最小值） |
| **预期结果** | 返回值为 50，即集合中的最小元素 |
| **测试类型** | FUNCTION |
| **测试级别** | Level1 |
| **测试数据** | 添加的元素: [100, 50, 150] |

### 场景6: 最大长度字符串边界

| 项目 | 内容 |
|------|------|
| **场景描述** | 测试 TreeSet 的 add 方法在参数为最大长度字符串时的边界行为 |
| **测试用例编号** | SUB_UTILS_UTIL_TREESET_ADD_BOUNDARY_001 |
| **测试用例名称** | testAddStringBoundary001 |
| **前置条件** | TreeSet 实例已创建，容器为空 |
| **测试步骤** | 1. 创建 TreeSet<string> 实例<br>2. 生成最大长度字符串（假设最大长度为 10000）<br>3. 调用 add() 方法，参数为最大长度字符串<br>4. 验证返回值为 true |
| **预期结果** | 方法执行成功，返回值为 true，最大长度字符串成功添加到集合中 |
| **测试类型** | FUNCTION |
| **测试级别** | Level2 |
| **测试数据** | 参数: 长度为 10000 的字符串 |

## 测试覆盖分析

| 测试类型 | 测试用例数 | 覆盖说明 |
|---------|-----------|---------|
| 参数测试 | 3 | 测试了 string 类型的各种场景：正常值、空字符串、null |
| 错误码测试 | 2 | 测试了错误码 401（参数错误）和 10200010（容器为空） |
| 返回值测试 | 1 | 测试了返回值的有效值 |
| 边界值测试 | 1 | 测试了字符串的最大长度边界 |

## 测试依赖关系

### 依赖的测试用例
- [ ] 无

### 被依赖的测试用例
- [ ] testGetFirstReturn001 - 需要先添加元素

## 测试环境要求

- **系统版本**: OpenHarmony API 10+
- **子系统**: Utils
- **设备类型**: 通用设备（Phone、Tablet）
- **网络环境**: 不需要

## 注意事项

1. **内存管理**：长时间运行大量测试用例时，请注意内存使用情况，建议每个测试套件执行后清理内存
2. **执行顺序**：测试用例按照场景编号顺序执行，请不要调整执行顺序，特别是返回值测试依赖于前置的添加操作
3. **数据清理**：每个测试用例执行后会自动创建新的实例，但建议在测试前检查容器状态
4. **性能考虑**：边界值测试（如最大长度字符串）可能需要较长时间，请耐心等待测试完成

## 变更记录

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|---------|------|
| 1.0 | 2026-02-10 | 初始版本 | xts-generator |
