# KEP 验证规则

本文档定义 HM Desktop PRD 文档中关键体验路径 (KEP) 的验证规则。

## KEP ID 格式

### 必需格式

KEP ID 必须遵循模式：`KEP{N}-{NN}`

- **KEP**：字面量前缀
- **{N}**：KEP 类别编号（1-9）
- **{NN}**：类别内的顺序编号（01-99）

### 示例

| 有效 | 无效 | 原因 |
|------|------|------|
| KEP1-01 | KEP-01 | 缺少类别编号 |
| KEP1-01 | KEP1-1 | 顺序编号必须是两位数 |
| KEP1-01 | KEP01-01 | 类别应该是单个数字 |
| KEP2-15 | KEP2-99 | 有效（在范围内）|

### 类别编号

| 类别 | 编号 | 说明 |
|------|------|------|
| 核心功能 | 1 | 产品生存必需的功能 |
| 用户体验 | 2 | 用户体验增强 |
| 管理功能 | 3 | 管理/管理功能 |
| 扩展功能 | 4 | 可选/增强功能 |

## KEP 名称规则

### 命名规范

1. **动词优先**：使用中文动词优先命名
2. **简洁**：最多 10 个汉字
3. **清晰**：避免歧义术语

### 示例

| 推荐 | 不推荐 | 原因 |
|------|--------|------|
| 查看磁盘信息 | 磁盘信息查看 | 不是动词优先 |
| 格式化磁盘 | 磁盘格式化操作 | 多余的词语 |
| 设置磁盘名称 | 修改 | 太模糊 |
| 执行磁盘修复 | 修复磁盘 | 良好 |

### 常用动词

| 类别 | 动词 |
|------|------|
| 查询类 | 查看、获取、显示、列举 |
| 操作类 | 执行、启动、停止、暂停 |
| 修改类 | 设置、修改、更新、变更 |
| 删除类 | 删除、移除、清除 |
| 创建类 | 创建、新增、添加 |

## 优先级分类

### P0（关键）

**定义**：产品发布时必须实现

**判断标准**：
- 定义产品的核心功能
- 法律/合规要求
- 安全关键功能
- 用户感知的阻塞问题

**示例**：磁盘格式化、磁盘信息查看、磁盘修复

### P1（重要）

**定义**：应该实现以提供良好的用户体验

**判断标准**：
- 重要但不阻塞的功能
- 频繁使用的次要功能
- 性能改进

**示例**：磁盘重命名、格式化进度通知

### P2（可选）

**定义**：可以推迟到未来版本

**判断标准**：
- 增强功能
- 边界情况处理
- 美好的用户体验改进

**示例**：自定义格式选项、高级修复选项

## KEP 完整性

### 必需字段

每个 KEP 必须包含：

```markdown
### KEP1-XX：[KEP名称]

- **优先级**：P0/P1/P2
- **用户故事**：[具体场景描述]
- **验收标准**：[可测试的条件列表]
```

### 用户故事格式

良好的用户故事应包括：

1. **角色**：谁在执行操作
2. **操作**：正在执行什么操作
3. **目的**：用户想要达到什么目标

**模板**：
```
作为[角色]，我想要[操作]，以便[目的]
```

**示例**：
```
作为桌面用户，我想要查看所有连接的磁盘信息，
以便了解磁盘容量和健康状态。
```

### 验收标准格式

每个验收标准必须：

- **明确**：清晰无歧义
- **可测量**：可客观验证
- **可测试**：可通过测试验证

**良好示例**：
- 点击磁盘列表项后，2秒内显示磁盘详情
- 格式化1TB磁盘，快速格式化耗时<30秒
- 磁盘移除后，3秒内从列表中消失

**不当示例**：
- 系统响应快速（不可测量）
- 用户界面友好（不明确）
- 尽可能快（不可测量）

## KEP 验证检查清单

对 PRD 中的每个 KEP，验证：

- [ ] KEP ID 遵循格式 `KEP{N}-{NN}`
- [ ] KEP 名称是动词优先
- [ ] KEP 名称 ≤10 个汉字
- [ ] 优先级明确指定（P0/P1/P2）
- [ ] 用户故事完整（角色 + 操作 + 目的）
- [ ] 至少定义了 2 个验收标准
- [ ] 所有验收标准都可测量
- [ ] KEP 映射到至少一个功能需求

## 常见验证错误

### 错误 1：KEP ID 重复

**问题**：多次使用相同的 KEP ID

**解决方案**：确保每个 KEP 有唯一 ID

### 错误 2：缺少优先级

**问题**：未指定优先级或优先级模糊

**解决方案**：为每个 KEP 清晰标记 P0/P1/P2

### 错误 3：验收标准模糊

**问题**：无法测试的标准

**解决方案**：使用具体的、可测量的条件重写

### 错误 4：KEP 缺少用户故事

**问题**：KEP 定义时缺少用户需求上下文

**解决方案**：按照模板添加完整的用户故事

## KEP 覆盖分析

验证单个 KEP 后，分析整体覆盖：

1. **P0 覆盖**：是否覆盖了所有关键用户场景？
2. **用户旅程**：KEP 集是否覆盖完整的用户旅程？
3. **边界情况**：是否覆盖了边界情况和错误场景？

### 覆盖指标

| 指标 | 目标 | 说明 |
|------|------|------|
| P0 KEP 数量 | ≥3 | 最少关键功能 |
| 用户角色覆盖 | 所有定义的角色 | 每个角色应有相关 KEP |
| 正常路径覆盖 | 100% | 覆盖所有正常操作 |
| 错误路径覆盖 | ≥80% | 覆盖大多数错误场景 |
